possible deadlock in do_qc
